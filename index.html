<html>
<head>
<title>Windows XP &amp; the Windows Driver Model - A Guide</title>
</head>
<body>
<h1>Windows XP &amp; the Windows Driver Model - A Guide</h1>
<h2>Introduction</h2>
<p>
As part of a senior project for Fall 2005, I've created this "guided tour"
for students to learn more about the Windows XP I/O System and how the
Windows Driver Model (WDM) fits into that architecture. It is my goal that
this guide will explain the XP I/O Subsystem, show how device drivers
work in the real world, provide annotated examples of WDM filter drivers 
that work with mouse devices, demonstrate how to debug device driver
problems, provide further references for readers who want even more
information, and get me a good grade on my senior project ;).</p>

<h2>Before You Start</h2>
<p>Before diving into the WDM driver development world, you'll need a few
tools. The <a 
href="http://www.microsoft.com/whdc/devtools/ddk/default.mspx">Windows
Device Driver Development Kit</a> (DDK) is the main tool you'll use to
build device drivers.  At the time of writing this, the DDK is "free," but
costs $15.00 in shipping and handling fees; the DDK is not available for
download at this time. It is <b>imperative to use the recommended
installation defaults</b> for the DDK, as longer filenames sometimes cause
problems with the DDK's build utility. Apart from the DDK,
you'll need a text editor and an administrator account on a machine
running Microsoft Windows XP to make the most of the WDM. If you'd
like to debug crash dumps from a driver-caused crash, you'll also want 
to download the <a
href="http://www.microsoft.com/whdc/devtools/debugging/default.mspx">Debugging
Tools for Windows</a> kit; I'll cover more about these tools in the
debugging and testing section (by
the way, <a href="http://www.sysinternals.com">SysInternals.com</a> 
provides another tool for
viewing print statements in kernel code called <a
href="http://www.sysinternals.com/Utilities/DebugView.html">DebugView</a>
if you don't want the 1000lb. gorilla that is the kernel debugger).</p>
<p>Almost as important as the DDK itself is some way of accessing the <a
href="http://msdn.microsoft.com/library/">Microsoft Developer's Network 
Library</a> (MSDN Library for short). If you don't have internet access,
you can also get snapshots of the library on CD as part of an MSDN
Academic Alliance program or through an MSDN subscription. Finally, there
are many excellent reference books and other websites that do an excellent
job of explaining the Windows Driver Model and the I/O Subsystem of
Windows itself; you can find out what references I recommend by looking at
the annotated bibliography linked to below. </p> 
<a name="menu" />
<h2>Site Navigation Tree</h2> 
<ul>
  <li><a href="background.html">Background &amp; Architecture</a>
  <ul>
    <li><a href="intspri.html">Interrupts and Scheduling related to Drivers</a></li>
    <li><a href="ddarch.html">Device Driver Architecture</a></li>
  </ul></li>  
  <li><a href="codingmsc.html">Coding Conventions &amp; Microsoft C</a></li>
  <li><a href="wdmfunctions.html">WDM Functions to Implement</a>
  <ul>
    <li><a href="structure.html">Driver (Data) Structures</a></li>
    <li><a href="irp.html">The I/O Request Packet</a></li>
  </ul></li>
  <li><a href="loading.html">Loading Drivers &amp; the Registry</a></li>
  <li><a href="debug.html">Debugging Your Driver</a></li>
  <li><a href="sourcecode">Annotated Sample Drivers &amp; Sources</a></li>
  <li><a href="annobib.html">Annotated Bibliography</a></li>
</ul>
<p>Following the above pages in order is good, but can be a little boring.
Feel
free to read these pages and following the links back and forth from one
to another. Also, incrementally testing drivers with more and more
functionality will make you more comfortable with this material. Finally,
you may also want to read about how drivers are loaded, or how I/O
Request Packets are structured, before you read the "whole story." These
pages should read fairly freely of sequential order, although logically
they do attempt to go from big picture to detail and back again.
</p>
<hr>
This documentation is licensed under the <a href="LICENSE">Apache License 2.0</a>. The source files retain their original licenses.
<pre>
/*
 *   Copyright 2005 Martin B. Smith
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 * 
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */   
 </pre>
</body>
</html>
